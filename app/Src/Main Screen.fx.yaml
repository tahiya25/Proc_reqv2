"'Main Screen' As screen":
    Fill: =RGBA(244, 244, 244, 1)

    rctFooter_MS As rectangle:
        Fill: |-
            =ColorValue("#ccf5ff")
        Height: =111
        Width: =639
        Y: =1024
        ZIndex: =1

    icnAddNewReq As icon.Add:
        Color: =theme.AppColor
        Height: =60
        Icon: =Icon.Add
        Visible: =IsBlank(Param("ID"))
        Width: =60
        X: =39
        Y: =174
        ZIndex: =6

    lblAddNewReq As label:
        Align: =Align.Right
        Color: =theme.AppColor
        Font: =Font.Lato
        Height: =37
        Size: =14
        Text: ="Add New Requisition"
        Visible: =IsBlank(Param("ID"))
        Width: =185
        X: =102
        Y: =185
        ZIndex: =7

    grp_Header_MS As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =7

        Rectangle1_6 As rectangle:
            Fill: =theme.AppColor
            Height: =86
            OnSelect: =
            Width: =552
            X: =88
            ZIndex: =2

        Image1_8 As image:
            Height: =86
            Image: =RecProc
            Width: =88
            ZIndex: =3

        Image14_3 As image:
            Height: =60
            HoverBorderColor: =ColorFade(Image14_3.BorderColor, 20%)
            HoverFill: =ColorFade(Image14_3.Fill, 20%)
            Image: =User().Image
            OnSelect: =
            PressedBorderColor: =ColorFade(Image14_3.BorderColor, -20%)
            PressedFill: =ColorFade(Image14_3.Fill, -20%)
            RadiusBottomLeft: =60
            RadiusBottomRight: =60
            RadiusTopLeft: =60
            RadiusTopRight: =60
            Width: =60
            X: =569
            Y: =13
            ZIndex: =4

        Label1_6 As label:
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Lato
            Height: =83
            PaddingLeft: =20
            Size: =21
            Text: ="Procurement Requisition"
            Width: =377
            X: =88
            Y: =1
            ZIndex: =5

    rdSelectReqFillMethod As radio:
        Color: =theme.AppColor
        Default: ="Free Form"
        FocusedBorderThickness: =0
        Font: =Font.Lato
        Height: =104
        Items: =["Library","Free Form"]
        Layout: =Layout.Horizontal
        OnChange: =Set(varValue, Self.Selected.Value)
        RadioBorderColor: =theme.AppColor
        RadioSelectionFill: =theme.AppColor
        Size: =21
        Visible: =IsBlank(Param("ID"))
        Width: =512
        X: =88
        Y: =86
        ZIndex: =8

    txtDeliveryLocEnter As text:
        BorderThickness: =0
        Default: =""
        FocusedBorderThickness: =0
        Font: =Font.Lato
        Height: =60
        HintText: ="Delivery Location"
        Size: =18
        Visible: =IsBlank(Param("ID"))
        Width: =576
        X: =39
        Y: =324
        ZIndex: =15

    txtRJobNoEnter As text:
        Align: =Align.Center
        BorderThickness: =0
        Default: =""
        FocusedBorderThickness: =0
        Font: =Font.Lato
        Height: =60
        HintText: ="Job  No"
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =18
        Visible: =IsBlank(Param("ID"))
        Width: =182
        X: =39
        Y: =249
        ZIndex: =16

    CB_Responsible As combobox:
        BorderColor: =theme.LightBlue
        BorderThickness: =1
        ChevronBackground: =theme.AppColor
        DisplayFields: =["DisplayName"]
        FocusedBorderThickness: =0
        Height: =60
        InputTextPlaceholder: =
        Items: =Choices(ReqHeader.Approver)
        OnChange: =
        SearchFields: =["DisplayName"]
        SearchItems: =Choices(ReqHeader.Approver,CB_Responsible.SearchText)
        SelectMultiple: =false
        Size: =11
        Visible: =IsBlank(Param("ID"))
        Width: =349
        X: =266
        Y: =249
        ZIndex: =18

    grpGTReq_MS As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =18

        Image1_9 As image:
            Height: =50
            Image: |-
                ="data:image/svg+xml," & 
                 EncodeUrl(
                    "<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='-10 0 2068 2048'>
                  <g transform='matrix(1 0 0 -1 0 2048),rotate(0,1034,1024)'>
                   <path fill='" & theme.AppColorText & "'
                d='M2048 1664v-128h-1280v128h1280zM768 1280h1280v-128h-1280v128zM768 896h1280v-128h-1280v128zM768 512h1280v-128h-1280v128zM478 1058l68 -68l-354 -354l-178 178l68 68l110 -110zM478 1826l68 -68l-354 -354l-178 178l68 68l110 -110z' />
                  </g>
                
                </svg>"
                )
            Width: =50
            X: =52
            Y: =1048
            ZIndex: =9

        Label3_2 As label:
            Color: =theme.AppColor
            Height: =27
            Size: =16
            Text: ="Requisitions"
            Width: =148
            X: =19
            Y: =1098
            ZIndex: =10

        btnSave_10 As button:
            BorderThickness: =0
            Color: =Transparent
            DisabledColor: =Transparent
            DisabledFill: =Transparent
            DisplayMode: =
            Fill: =RGBA(0, 0, 0, 0)
            FocusedBorderColor: =Transparent
            FocusedBorderThickness: =0
            Height: =87
            HoverBorderColor: =Transparent
            HoverColor: =Transparent
            HoverFill: =Transparent
            OnSelect: =Navigate('Requisitions Screen')
            PressedBorderColor: =Transparent
            PressedColor: =Transparent
            PressedFill: =Transparent
            Text: =""
            Tooltip: ="Save Change Records"
            Width: =167
            Y: =1039
            ZIndex: =11

    grpGTLib_MS As group:
        Height: =5
        Width: =5
        X: =20
        Y: =40
        ZIndex: =21

        Image1_10 As image:
            Height: =50
            Image: |-
                ="data:image/svg+xml," & 
                 EncodeUrl(
                    "<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='-10 0 2068 2048'>
                  <g transform='matrix(1 0 0 -1 0 2048),rotate(0,1034,1024)'>
                   <path fill='" & theme.AppColorText & "'
                d='M640 256v1536h384v-1536h-384zM768 1664v-1280h128v1280h-128zM128 256v1536h384v-1536h-384zM256 1664v-1280h128v1280h-128zM1491 1815l484 -1450l-346 -116l-484 1450zM1287 1629l412 -1238l134 44l-413 1238z' />
                  </g>
                
                </svg>"
                )
            Width: =50
            X: =211
            Y: =1048
            ZIndex: =12

        Label3_3 As label:
            Align: =Align.Center
            Color: =theme.AppColor
            Height: =28
            Size: =16
            Text: ="Library"
            Width: =126
            X: =175
            Y: =1098
            ZIndex: =13

        btnSave_11 As button:
            BorderThickness: =0
            Color: =Transparent
            DisabledColor: =Transparent
            DisabledFill: =Transparent
            DisplayMode: =
            Fill: =RGBA(0, 0, 0, 0)
            FocusedBorderColor: =Transparent
            FocusedBorderThickness: =0
            Height: =87
            HoverBorderColor: =Transparent
            HoverColor: =Transparent
            HoverFill: =Transparent
            OnSelect: =Navigate('Library Screen')
            PressedBorderColor: =Transparent
            PressedColor: =Transparent
            PressedFill: =Transparent
            Text: =""
            Tooltip: ="Save Change Records"
            Width: =129
            X: =172
            Y: =1039
            ZIndex: =14

    lblReqID As label:
        Align: =Align.Center
        Color: =RGBA(179, 179, 179, 1)
        Height: =31
        Size: =16
        Text: |-
            =If(
                !IsBlank(Param("ID")),
                LookUp(ReqHeader,Title=Param("ID"),Title),
            If(!IsBlank(varNewReqPatch),varNewReqPatch.Title,""))
        Width: =116
        X: =32
        Y: =If(!IsBlank(Param("ID")),170,511)
        ZIndex: =22

    galAddReqItems As gallery.galleryVertical:
        Height: =If(!IsBlank(Param("ID")),928,464)
        Items: |-
            =If(
                !IsBlank(Param("ID")),
                Filter(
                    ReqDetails,ReqID=(Param("ID"))
                       ),
            SortByColumns(Filter(ReqDetails,ReqID=varNewReqPatch.Title),"ID",Descending))
        Layout: =Layout.Vertical
        ShowScrollbar: =false
        TemplateSize: =449
        Y: =If(!IsBlank(Param("ID")),205,572)
        ZIndex: =23

        txtGalPartNo As text:
            BorderThickness: =0
            Default: =ThisItem.Title
            FocusedBorderThickness: =0
            Font: =Font.Lato
            Height: =60
            HintText: =""
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =18
            Width: =192
            X: =30
            Y: =45
            ZIndex: =1

        txtGalDescription As text:
            BorderThickness: =0
            Default: =Proper(ThisItem.ItemDescription)
            FocusedBorderThickness: =0
            Font: =Font.Lato
            Height: =115
            HintText: ="Description"
            Mode: =TextMode.MultiLine
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =18
            Width: =576
            X: =30
            Y: =117
            ZIndex: =2

        drpgalVendor As dropdown:
            AllowEmptySelection: =true
            BorderColor: =theme.LightBlue
            BorderThickness: =0
            ChevronBackground: =theme.AppColor
            ChevronHoverBackground: =theme.AppColor
            Default: =ThisItem.Vendor
            FocusedBorderColor: =drpgalVendor.BorderColor
            FocusedBorderThickness: =0
            Font: =Font.Lato
            FontWeight: =Normal
            Height: =60
            HoverBorderColor: =ColorFade(drpgalVendor.BorderColor, 15%)
            HoverFill: =RGBA(242, 242, 242,1)
            Items: =["Vendor 1", "Vendor 2"]
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            PressedBorderColor: =drpgalVendor.HoverBorderColor
            PressedFill: =theme.AppColor
            SelectionFill: =theme.AppColor
            Size: =18
            Width: =213
            X: =228
            Y: =45
            ZIndex: =3

        txtGalQty As text:
            BorderThickness: =0
            Default: =ThisItem.Quantity
            FocusedBorderThickness: =0
            Font: =Font.Lato
            Height: =60
            HintText: =""
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =18
            Width: =126
            X: =30
            Y: =270
            ZIndex: =4

        drpgalUOM As dropdown:
            AllowEmptySelection: =true
            BorderColor: =theme.LightBlue
            BorderThickness: =0
            ChevronBackground: =theme.AppColor
            ChevronHoverBackground: =theme.AppColor
            Default: =ThisItem.UOM
            FocusedBorderColor: =drpgalUOM.BorderColor
            FocusedBorderThickness: =0
            Font: =Font.Lato
            FontWeight: =Normal
            Height: =60
            HoverBorderColor: =ColorFade(drpgalUOM.BorderColor, 15%)
            HoverFill: =RGBA(242, 242, 242,1)
            Items: =["Each", "LF"]
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            PressedBorderColor: =drpgalUOM.HoverBorderColor
            PressedFill: =theme.AppColor
            SelectionFill: =theme.AppColor
            Size: =18
            Width: =146
            X: =164
            Y: =270
            ZIndex: =5

        drpgalCostCode As dropdown:
            AllowEmptySelection: =true
            BorderColor: =theme.LightBlue
            BorderThickness: =0
            ChevronBackground: =theme.AppColor
            ChevronHoverBackground: =theme.AppColor
            Default: =ThisItem.CostCode
            FocusedBorderColor: =drpgalCostCode.BorderColor
            FocusedBorderThickness: =0
            Font: =Font.Lato
            FontWeight: =Normal
            Height: =60
            HoverBorderColor: =ColorFade(drpgalCostCode.BorderColor, 15%)
            HoverFill: =RGBA(242, 242, 242,1)
            Items: =["Each", "LF"]
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            PressedBorderColor: =drpgalCostCode.HoverBorderColor
            PressedFill: =theme.AppColor
            SelectionFill: =theme.AppColor
            Size: =18
            Width: =190
            X: =316
            Y: =270
            ZIndex: =6

        drpgalCat As dropdown:
            AllowEmptySelection: =true
            BorderColor: =theme.LightBlue
            BorderThickness: =0
            ChevronBackground: =theme.AppColor
            ChevronHoverBackground: =theme.AppColor
            Default: =ThisItem.Category
            FocusedBorderColor: =drpgalCat.BorderColor
            FocusedBorderThickness: =0
            Font: =Font.Lato
            FontWeight: =Normal
            Height: =60
            HoverBorderColor: =ColorFade(drpgalCat.BorderColor, 15%)
            HoverFill: =RGBA(242, 242, 242,1)
            Items: =["M", "C"]
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            PressedBorderColor: =drpgalCat.HoverBorderColor
            PressedFill: =theme.AppColor
            SelectionFill: =theme.AppColor
            Size: =18
            Width: =117
            X: =513
            Y: =270
            ZIndex: =7

        dpDalReqDate As datepicker:
            BorderThickness: =0
            DefaultDate: =ThisItem.'Date Required'
            FocusedBorderThickness: =0
            Font: =Font.Lato
            Height: =60
            IconBackground: =theme.AppColor
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            Size: =21
            Width: =224
            X: =30
            Y: =370
            ZIndex: =8

        drpgalReq As dropdown:
            AllowEmptySelection: =true
            BorderColor: =theme.LightBlue
            BorderThickness: =0
            ChevronBackground: =theme.AppColor
            ChevronHoverBackground: =theme.AppColor
            Default: =ThisItem.Required
            FocusedBorderColor: =drpgalReq.BorderColor
            FocusedBorderThickness: =0
            Font: =Font.Lato
            FontWeight: =Normal
            Height: =60
            HoverBorderColor: =ColorFade(drpgalReq.BorderColor, 15%)
            HoverFill: =RGBA(242, 242, 242,1)
            Items: =["Yes", "No"]
            OnChange: |-
                =If(ThisItem.ID in colReqDetails.ID,
                Update(colReqDetails,
                LookUp(colReqDetails,ID=ThisItem.ID),
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        
                        }),
                Collect(colReqDetails,
                    {
                        ID:ThisItem.ID,
                        Title:txtGalPartNo.Text,
                        Vendor:drpgalVendor.Selected.Value,
                        UOM:drpgalUOM.Selected.Value,
                        Quantity:txtGalQty.Text,
                        ItemDescription:txtGalDescription.Text,
                        Required:drpgalReq.Selected.Value,
                        DateRequired:dpDalReqDate.SelectedDate,
                        CostCode:drpgalCostCode.Selected.Value,
                        Category:drpgalCat.Selected.Value
                        })
                )        
            PressedBorderColor: =drpgalReq.HoverBorderColor
            PressedFill: =theme.AppColor
            SelectionFill: =theme.AppColor
            Size: =18
            Width: =117
            X: =276
            Y: =370
            ZIndex: =11

        lblReqDate As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="Required Date"
            Width: =224
            X: =30
            Y: =339
            ZIndex: =12

        lblRequired As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="Required"
            Width: =111
            X: =282
            Y: =339
            ZIndex: =13

        lblQty As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="Quantity"
            Width: =134
            X: =30
            Y: =232
            ZIndex: =14

        lblUOM As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="UOM"
            Width: =134
            X: =169
            Y: =232
            ZIndex: =15

        lblCostCode As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="Cost Code"
            Width: =134
            X: =316
            Y: =232
            ZIndex: =16

        lblCataegory As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="Cat"
            Width: =93
            X: =513
            Y: =232
            ZIndex: =17

        lblPartNo As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="Part No"
            Width: =134
            X: =35
            Y: =12
            ZIndex: =18

        lblManufacturer As label:
            Color: =RGBA(179, 179, 179, 1)
            Height: =31
            Size: =16
            Text: ="Manufacturer"
            Width: =190
            X: =228
            Y: =12
            ZIndex: =19

    grp_AddREqDetails As group:
        Height: =5
        Width: =5
        X: =20
        Y: =20
        ZIndex: =26

        btnSave_8 As button:
            BorderThickness: =0
            Color: =theme.AppColor
            DisabledColor: =Transparent
            DisabledFill: =Transparent
            DisplayMode: =
            Fill: |-
                =ColorValue("#ccf5ff")
            FocusedBorderColor: =Transparent
            FocusedBorderThickness: =0
            Height: =94
            HoverBorderColor: =Transparent
            HoverColor: =theme.AppColor
            HoverFill: |-
                =ColorFade(ColorValue("#ccf5ff"),.70)
            OnSelect: |
                =Patch(ReqDetails,Defaults(ReqDetails),{Title:"", ReqID:txtRJobNoEnter.Text & "-" &    Text(NewReqAdded.ID +1)});
            PaddingLeft: =50
            PressedBorderColor: =Transparent
            PressedColor: =Transparent
            PressedFill: =Transparent
            Size: =20
            Text: ="Add Details"
            Tooltip: ="Save Change Records"
            Visible: =!IsBlank(varNewReqPatch)
            Width: =262
            X: =353
            Y: =405
            ZIndex: =19

        Image8_4 As image:
            Height: =60
            Image: |-
                ="data:image/svg+xml," & 
                 EncodeUrl(
                    "<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='-10 0 2068 2048'>
                  <g transform='matrix(1 0 0 -1 0 2048),rotate(0,1034,1024)'>
                   <path fill='" & theme.AppColorText & "'
                d='M256 1536v-128h-128v128h128zM256 1280v-128h-128v128h128zM256 1024v-128h-128v128h128zM256 768v-128h-128v128h128zM256 512v-128h-128v128h128zM128 256h128v-128h-128v128zM256 0v128h128v-128h-128zM512 0v128h128v-128h-128zM256 1920h-128v128h128v-128zM512 2048v-128h-128v128h128zM768 2048v-128h-128v128h128zM1024 2048v-128h-128v128h128zM1280 2048v-128h-128v128h128zM1536 2048v-128h-128v128h128zM1664 1792h-128v128h128v-128zM1536 1536v128h128v-128h-128zM256 1792v-128h-128v128h128zM1920 1280q26 0 49.5 -10t41 -27.5t27.5 -41t10 -49.5v-1152h-1115l-165 165v987q0 26 10 49.5t27.5 41t41 27.5t49.5 10h1024zM1152 1152v-384h512v384h-512zM1664 128v256h-512v-256h128v128h128v-128h256zM1920 128v1024h-128v-512h-768v512h-128v-933l91 -91h37v384h768v-384h128z' />
                  </g>
                
                </svg>"
                )
            Visible: =!IsBlank(varNewReqPatch)
            Width: =60
            X: =364
            Y: =422
            ZIndex: =20

    lblReqIDStatus As label:
        Align: =Align.Center
        Color: =RGBA(179, 179, 179, 1)
        Height: =31
        Size: =16
        Text: |-
            =If(
                !IsBlank(Param("ID")),
                LookUp(ReqHeader,Title=Param("ID"),Status.Value),
            If(!IsBlank(varNewReqPatch),varNewReqPatch.Status.Value,""))
        Width: =106
        X: =501
        Y: =If(!IsBlank(Param("ID")),170,511)
        ZIndex: =28

    lblReqJObNo As label:
        Align: =Align.Center
        Color: =RGBA(179, 179, 179, 1)
        Height: =31
        Size: =16
        Text: |-
            =If(
                !IsBlank(Param("ID")),
                LookUp(ReqHeader,Title=Param("ID"),JobNo),
            If(!IsBlank(varNewReqPatch),varNewReqPatch.JobNo,""))
        Width: =89
        X: =148
        Y: =If(!IsBlank(Param("ID")),170,511)
        ZIndex: =29

    lblReqDescription As label:
        Color: =RGBA(179, 179, 179, 1)
        Height: =31
        Size: =16
        Text: =If(!IsBlank(varNewReqPatch),varNewReqPatch.DeliveryLoc,"")
        Tooltip: |-
            =If(
                !IsBlank(Param("ID")),
                LookUp(ReqHeader,Title=Param("ID"),DeliveryLoc),
            If(!IsBlank(varNewReqPatch),varNewReqPatch.DeliveryLoc,""))
        Width: =270
        Wrap: =false
        X: =231
        Y: =If(!IsBlank(Param("ID")),170,511)
        ZIndex: =30

    rctCurrentReqItems As rectangle:
        Fill: |-
            =ColorValue("#ccf5ff")
        Height: =453
        Visible: =varShowNewReqDetails
        Width: =640
        Y: =89
        ZIndex: =31

    imgShowCurrentReqDetails As image:
        Height: =65
        Image: |-
            ="data:image/svg+xml," & 
             EncodeUrl(
                "<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='-10 0 2068 2048'>
              <g transform='matrix(1 0 0 -1 0 2048),rotate(0,1034,1024)'>
               <path fill='" & theme.AppColorText &"'
            d='M128 1280v128h1792v-128h-1792zM128 1920h1792v-128h-1792v128zM128 768v128h1792v-128h-1792zM128 256v128h1792v-128h-1792z' />
              </g>
            
            </svg>"
            )
        OnSelect: =If(varShowNewReqDetails, Set(varShowNewReqDetails, false),Set(varShowNewReqDetails, true))
        Tooltip: =If(varShowNewReqDetails, "Hide Details","Show Req Details")
        Width: =71
        X: =563
        Y: =97
        ZIndex: =32

    lblWarning As label:
        Align: =Align.Center
        Color: =RGBA(184, 0, 0, 1)
        Height: =70
        Size: =21
        Text: ="No Requisition Details available !"
        Visible: =And(varShowNewReqDetails , CountRows(Filter(ReqDetails,ReqID=txtRJobNoEnter.Text & "-" &    Text(NewReqAdded.ID +1)))=0)
        Width: =493
        X: =39
        Y: =92
        ZIndex: =33

    lblPartNo_1 As label:
        Color: =RGBA(179, 179, 179, 1)
        Height: =31
        Size: =16
        Text: ="Part No"
        Visible: =varShowNewReqDetails
        Width: =103
        X: =10
        Y: =174
        ZIndex: =34

    lblPartNo_2 As label:
        Color: =RGBA(179, 179, 179, 1)
        Height: =31
        Size: =16
        Text: ="Description"
        Visible: =varShowNewReqDetails
        Width: =305
        X: =160
        Y: =174
        ZIndex: =35

    grpSaveReq As group:
        Height: =5
        Width: =5
        X: =60
        Y: =60
        ZIndex: =35

        Icon1_10 As icon.Add:
            Color: =theme.AppColor
            DisabledFill: =Transparent
            DisplayMode: =
            FocusedBorderColor: =Icon1_10.BorderColor
            FocusedBorderThickness: =0
            Height: =50
            HoverBorderColor: =Transparent
            HoverColor: =Transparent
            HoverFill: =Transparent
            Icon: =Icon.Save
            OnSelect: |-
                =If(
                    CountRows(colReqDetails) > 0,
                    Patch(
                        ReqDetails,
                        colReqDetails
                    );
                    Notify(
                        "Success",
                        NotificationType.Success
                    )
                );
                Clear(colReqDetails)
            PressedBorderColor: =ColorFade(Icon1_10.BorderColor, -20%)
            PressedColor: =Transparent
            PressedFill: =Transparent
            Tooltip: ="Save Change Records"
            Width: =50
            X: =550
            Y: =1048
            ZIndex: =17

        Label3_4 As label:
            Color: =theme.AppColor
            Height: =27
            Size: =16
            Text: ="Save Req"
            Width: =100
            X: =525
            Y: =1098
            ZIndex: =26

        btnSave_9 As button:
            Color: =Transparent
            DisabledColor: =Transparent
            DisabledFill: =Transparent
            DisplayMode: =
            Fill: =RGBA(0, 0, 0, 0)
            FocusedBorderColor: =Transparent
            FocusedBorderThickness: =0
            Height: =87
            HoverBorderColor: =Transparent
            HoverColor: =Transparent
            HoverFill: =Transparent
            OnSelect: |-
                =If(
                    CountRows(colReqDetails) > 0,
                    Patch(
                        ReqDetails,
                        colReqDetails
                    );
                    Notify(
                        "Success",
                        NotificationType.Success
                    )
                );
                Clear(colReqDetails);
                Switch(varNewReqPatch.Status.Value,
                "New",
                CostCodeRequisition.Run(varNewReqPatch.Title,varNewReqPatch.JobNo,varNewReqPatch.Created,varNewReqPatch.DeliveryLoc)
                
                      )
            PressedBorderColor: =Transparent
            PressedColor: =Transparent
            PressedFill: =Transparent
            Text: =""
            Tooltip: ="Save Change Records"
            Width: =104
            X: =525
            Y: =1039
            ZIndex: =27

    galAvailableReqItems As gallery.galleryVertical:
        Height: =261
        Items: |-
            =If(
                !IsBlank(Param("ID")),
                Filter(
                    ReqDetails,ReqID=(Param("ID"))
                       ),
            SortByColumns(Filter(ReqDetails,ReqID=varNewReqPatch.Title),"ID",Descending))
        Layout: =Layout.Vertical
        TemplateFill: =White
        TemplateSize: =44
        Visible: =varShowNewReqDetails
        Y: =205
        ZIndex: =36

        Label8 As label:
            Height: =34
            OnSelect: =Select(Parent)
            Size: =18
            Text: =ThisItem.Title
            Width: =148
            Y: =4
            ZIndex: =1

        Label8_1 As label:
            Height: =34
            OnSelect: =Select(Parent)
            Size: =18
            Text: =Proper(ThisItem.ItemDescription)
            Tooltip: =ThisItem.ItemDescription
            Width: =334
            Wrap: =false
            X: =153
            Y: =4
            ZIndex: =2

        imd_DelRec As image:
            Height: =30
            Image: |-
                ="data:image/svg+xml," & 
                 EncodeUrl(
                    "<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='-10 0 2068 2048'>
                  <g transform='matrix(1 0 0 -1 0 2048),rotate(0,1034,1024)'>
                   <path fill='" & theme.AppColorText & "'
                d='M1792 1664h-128v-1472q0 -40 -15 -75t-41 -61t-61 -41t-75 -15h-1024q-40 0 -75 15t-61 41t-41 61t-15 75v1472h-128v128h512v128q0 27 10 50t27.5 40.5t40.5 27.5t50 10h384q27 0 50 -10t40.5 -27.5t27.5 -40.5t10 -50v-128h512v-128zM768 1792h384v128h-384v-128zM1536 1664h-1152v-1472q0 -26 19 -45t45 -19h1024q26 0 45 19t19 45v1472zM768 384h-128v1024h128v-1024zM1024 384h-128v1024h128v-1024zM1280 384h-128v1024h128v-1024z' />
                  </g>
                
                </svg>"
                )
            OnSelect: =Remove(ReqDetails,ThisItem)
            Width: =30
            X: =545
            Y: =8
            ZIndex: =3

        imd_DelRec_1 As image:
            Height: =20
            Image: |-
                ="data:image/svg+xml," & 
                 EncodeUrl(
                    "<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='-10 0 2068 2048'>
                  <g transform='matrix(1 0 0 -1 0 2048),rotate(0,1034,1024)'>
                   <path fill=' Red'
                d='M1884 0h-1891l946 1991zM263 171h1351l-675 1422zM1024 1195v-555h-171v555h171zM853 512h171v-171h-171v171z' />
                  </g>
                
                </svg>"
                )
            OnSelect: =Remove(ReqDetails,ThisItem)
            Visible: =ThisItem.ID in colReqDetails.ID
            Width: =20
            X: =595
            Y: =13
            ZIndex: =4

    grpAddReq As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =41

        Image8_3 As image:
            Height: =60
            Image: |-
                ="data:image/svg+xml," & 
                 EncodeUrl(
                    "<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' viewBox='-10 0 2068 2048'>
                  <g transform='matrix(1 0 0 -1 0 2048),rotate(0,1034,1024)'>
                   <path fill='" & theme.AppColorText & "'
                d='M1152 1280q27 0 50 -10t40.5 -27.5t27.5 -40.5t10 -50v-1152h-1115l-165 165v987q0 27 10 50t27.5 40.5t40.5 27.5t50 10h1024zM384 1152v-384h512v384h-512zM896 128v256h-512v-256h128v128h128v-128h256zM1152 1152h-128v-512h-768v512h-128v-933l91 -91h37v384h768v-384h128v1024zM512 1408h-128v640h512v-128h-384v-512zM1920 2048v-1024h-512v128h384v768h-128v128h256zM1349 1792l-162 163l90 90l318 -317l-318 -317l-90 90l162 163h-581v-256h-128v384h709zM1414 1728l-6 5v-10z' />
                  </g>
                
                </svg>"
                )
            Visible: =And(!IsBlank(txtDeliveryLocEnter) ,!IsBlank(txtRJobNoEnter) )
            Width: =60
            X: =53
            Y: =422
            ZIndex: =21

        Label2 As label:
            Color: =theme.AppColor
            Height: =70
            Size: =21
            Text: ="Add Req"
            Visible: =And(!IsBlank(txtDeliveryLocEnter) ,!IsBlank(txtRJobNoEnter) )
            Width: =170
            X: =119
            Y: =417
            ZIndex: =24

        btnSave_7 As button:
            BorderColor: =theme.AppColor
            BorderThickness: =1
            DisabledColor: =Transparent
            DisabledFill: =Transparent
            DisplayMode: =
            Fill: =RGBA(0, 0, 0, 0)
            FocusedBorderColor: =Transparent
            FocusedBorderThickness: =0
            Height: =94
            HoverBorderColor: =Transparent
            HoverColor: =Black
            HoverFill: =Transparent
            OnSelect: |+
                =Refresh(ReqHeader);
                Set(NewReqAdded, First(Sort(ReqHeader,ID,SortOrder.Descending)));
                
                If(Text(NewReqAdded.ID +1) = varNewReqPatch.Title  ,    Notify(
                        "Waning",
                        "Requisition No: " & varNewReqPatch.Title & " already exists in the DB"
                    ),
                
                Set(varNewReqPatch, Patch(ReqHeader, Defaults(ReqHeader),
                {
                    Title: txtRJobNoEnter.Text & "-" &  Text(NewReqAdded.ID +1),
                    DeliveryLoc:txtDeliveryLocEnter.Text,
                    JobNo:txtRJobNoEnter.Text,
                    Approver: {
                           '@odata.type':"#Microsoft.Azure.Connectors.SharePoint.SPListExpandedUser",
                           Claims: "i:0#.f|membership|" & CB_Responsible.Selected.Email ,
                           Department: "",
                           DisplayName: CB_Responsible.Selected.DisplayName,
                           Email: CB_Responsible.Selected.Email,
                           JobTitle: "",
                           Picture: ""
                        }
                }
                )));
                Reset(txtRJobNoEnter);Reset(txtDeliveryLocEnter);Reset(CB_Responsible);
                If(varValue="Library",Navigate('Library Screen'))
                
            PaddingLeft: =50
            PressedBorderColor: =Transparent
            PressedColor: =Transparent
            PressedFill: =Transparent
            Size: =24
            Text: =""
            Tooltip: ="Save Change Records"
            Visible: =And(!IsBlank(txtDeliveryLocEnter) ,!IsBlank(txtRJobNoEnter) )
            Width: =262
            X: =39
            Y: =405
            ZIndex: =25

